# TODO Sun Aug 17 11:10:13 2014 GMT
# $Id: TODO 14 2014-08-22 18:20:31Z abalama $

# GENERAL

  * Прикрутить тестирование TEST { } -- сейчас стоит заглушка

  * Пока без автоконфигурирования, но подготовить релиз для CPAN, первую версию. Не забыть:
     - после релиза создать сразу сл. версию

  * Научить заливать бэкапы на коллектор collector.cgi используя HTTP POST multipart механизм 
    передачи данных. в качестве параметров должны выступать:
     - URL/URI (https://user:password@site.com/path/)
       - <user>     = user
       - <password> = password
     (- action = upload -- необязательный параметр) 
     - host   = имя хоста
     - file   = имя файла 
     - data   = данные передаваемые из сжатого файла
     - . . .  = . . .
    user и password уходят исключительно в стандартную авторизацию если это требует сервер

  * При соответствующем флаге отправлять на коллектор данные об статусе выполнения бэкапа и следукющий
    набор данных сохраняющийся в SQLite:
     - ID
     - Date stamp
     - Agent host (кто делает бэкап)
     - Agent IP
     - Agent section name
     - Server host (куда делается бэкап)
     - Server IP (берется из заголовков настройки или nslookup утилитлй как на CBWI)
     - Status of operation (1=OK/0=ERROR)
     - Date start
     - Date finish
     - File name
     - File size
     - File MD5 sum
     - File SHA1 sum
     - Message (табличка результативная)
     - Comment (из секции конфигурация по хосту Comment)
    Далее эти данные отображаются на WEB интерфейсе коллектора

  * При каждом неуспешном прохождении бэкапа отправляется информационное письмо письмо.
    на непрохождение оказывает влияние доступность коллектора, делается соответствующий пинг (action=status)

  * Коллектор это часть App::MBUtiny, но существует интеграция с MonM. MonM смотрит, если есть 
    установленный модуль App::MBUtiny то он пытается построить соответвующий грид по данным коллектора
    Коллектор это проект на базе WWW::MLite выполняющий функцую API. Обмен - исключительно XML! коллектор
    состоит из mbucollector.cgi и модулей App::MBUtiny::Collector + App::MBUtiny::Collector::*
    Коллектор берёт конфигурацию из установленного локально проекта App::MBUtiny используя файл collector.conf

  * Придумать как сказать пользователю о том, что для настройки проекта ему нужно запустить
    команду mbutiny config. При этом произойдёт анализ - есть ли уже установленные конфигурационные файлы.
    есди они есть, спросит - сбросить ли настройки до дефолтных. Если нет файлов или отвечено что сбросить 
    то произойдёт обращение в секцию _DATA_ скрипта mbutny, получит данные base64, раскодирует их и запишит
    оригинал на диск в виде файлика /tmp/mbutiny_config.tgz. Затем разархивирует его и извлечет все 
    конфигурационные файлы в директорию назначения. Для того чтобы создать данный архив нужно будет 
    при мейкинге написать команду для мейкера под именем tarconfig и выполнять ее при сборке дистрибутива!!
    Для хранения выбрать принцип CTK::Helper::SkelTiny и CTK::Helper как пример. Отличие только в том что
    нет атрибутов и всё хранится в самом скрипте. Следует заметить что нужно избавиться от русских букв,
    заменив их каким-то образом на транслитерацию. Помимо этого следует избавиться и от виндовых переносов 
    строк

  * по части автоконфигурирования: Сделать два идентичных файла конфигурации для Windows и для Unix/Linux
    при разархивировании прогнать конфигурацию как в случае со скелетонами, таким образом чтобы сделать
    адаптацию между Win/nix

  * Написать функцию restore и опробовать ее в работе. см. mbu.pl для примера. Получение файлов
    можно и нужно реализовать через File::Fetch

  * Сделать проект в виде perl2exe !! 
      
# BUGS

    * none

# REFACTORING

    * none

# DOCUMENTATION

    * none

# DIAGNOSTICS

    * none

# SUPPORT

    * none
